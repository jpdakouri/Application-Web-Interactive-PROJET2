<div style="margin: auto">
    <canvas #previewCanvas style="height: 100%" hidden></canvas>
    <canvas #downloadProcessingCanvas hidden></canvas>
    <a #link #download hidden></a>
<!--  <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/392/redwood-ukulele-top.jpg" [ngStyle]="{'filter':tempFilter}" width="620">-->
  <img #previewImage [src]="imageSource" [ngStyle]="{'filter':tempFilter}" width="620" height="450">
  <!--  pattern="[a-zA-Z0-9-_]*"-->
  <div class="export-options">
      <mat-form-field hintLabel="Max 25 caractères" appearance="fill">
        <mat-label>Nom du fichier</mat-label>
        <input matInput
               #input
               [formControl]="fileName"
               maxlength="25"
               placeholder="Ex. dessin1"
               required>
        <mat-hint align="end">{{input.value?.length || 0}}/25</mat-hint>
        <mat-error *ngIf="fileName.invalid">{{getErrorMessage()}}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Extension</mat-label>
        <mat-select [(value)]="selectedFormat" (selectionChange)="onFormatChange(selectedFormat)">
          <mat-option *ngFor="let format of formats" [value]="format">{{ format }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Filtre</mat-label>
        <mat-select [(value)]="selectedFilter" (selectionChange)="onFilterChange(selectedFilter)">
          <mat-option *ngFor="let filter of filters" [value]="filter">{{ filter }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>


<!--  <mat-card class="example-result-card" *ngIf="selectedFilter != 'Aucun filtre'">-->
<!--    <mat-card-content>-->
<!--      <h4>Pourcentage du filtre</h4>-->
<!--&lt;!&ndash;     <mat-slider style="width: 620px; margin-top: 8px;" thumbLabel="true" (valueChange)="onFilterPercentageChange($event)" color="primary" max="1000"> </mat-slider>&ndash;&gt;-->
<!--      <mat-slider style="width: 590px;" thumbLabel="true" (valueChange)="onFilterPercentageChange($event)" color="primary" max="100"> </mat-slider>-->
<!--    </mat-card-content>-->
<!--  </mat-card>-->

  <mat-dialog-actions  mat-dialog-actions>
    <button mat-raised-button mat-dialog-close mat-flat-button>Annuler</button>

    <div class="flexExpand"></div>

    <button mat-raised-button color="primary" disabled>
      <span class="material-icons">file_upload</span>Téléverser sur Imgur
    </button>

    <button mat-raised-button color="primary" (click)="onDownload()" [disabled]="fileName.invalid">
      <span class="material-icons" (click)="onDownload()">file_download</span>Télécharger
    </button>

  </mat-dialog-actions>

</div>
